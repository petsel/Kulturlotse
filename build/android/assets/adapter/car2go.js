function getDist(e,t,o,a){var s=π*e/180,r=π*o/180,i=π*(t-a)/180;return Math.round(1e3*Math.acos(Math.sin(s)*Math.sin(r)+Math.cos(s)*Math.cos(r)*Math.cos(i))*180/Math.PI*60*1.1515*1.609344)}const π=Math.PI;exports.loadFreeVehicles=function(e){var t=Ti.Network.createHTTPClient({timeout:3e4,onload:function(){(new Date).getTime();Ti.App.Properties.setList("CAR2GO",JSON.parse(this.responseText).placemarks),e.done&&e.done(JSON.parse(this.responseText).placemarks)}});t.open("GET","https://www.car2go.com/api/v2.1/vehicles?loc=hamburg&oauth_consumer_key=car2gowebsite&format=json"),t.setRequestHeader("Accept","text/javascript, application/javascript"),t.setRequestHeader("User-Agent","Mozilla/5.0 (Macintosh; Intel Mac OS X 10.10; rv:37.0) Gecko/20100101 Firefox/37.0"),t.send();(new Date).getTime()},exports.loadOperatingAreas=function(e){var t=Ti.Network.createHTTPClient({timeout:3e4,onload:function(){Ti.App.Properties.setList("CAR2GOAREAS",JSON.parse(this.responseText).placemarks),e.done&&e.done(JSON.parse(this.responseText).placemarks)}});t.open("GET","https://www.car2go.com/api/v2.1/operationareas?loc=hamburg&oauth_consumer_key=car2gowebsite&format=json"),t.setRequestHeader("Accept","text/javascript, application/javascript"),t.setRequestHeader("User-Agent","Mozilla/5.0 (Macintosh; Intel Mac OS X 10.10; rv:37.0) Gecko/20100101 Firefox/37.0"),t.send()},exports.getFreeVehicles=function(e){var t=new(require("vendor/georoute"));t.getLocation({done:function(t){for(var o=Ti.App.Properties.getList("CAR2GO",[]),a=0;a<o.length;a++)o[a].dist=getDist(o[a].coordinates[1],o[a].coordinates[0],t.coords.latitude,t.coords.longitude);o.sort(function(e,t){return parseFloat(e.dist)-parseFloat(t.dist)}),e.done&&e.done(o)}})};