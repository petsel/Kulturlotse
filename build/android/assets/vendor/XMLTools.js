var XMLTools=function(e){"string"==typeof e&&(this.doc=Ti.XML.parseString(e).documentElement),"object"==typeof e&&(this.doc=e.documentElement)};XMLTools.prototype.getDocument=function(){return this.doc};var addToObject=function(e,a,n){if(null==e[a])e[a]=n;else if(e[a]instanceof Array)e[a].push(n);else{var r=e[a],i=[r,n];e[a]=i}return e},traverseTree=function(e){var a=!0,n={};if(e.hasChildNodes()){for(var r=0;r<e.childNodes.length;r++){var i=e.childNodes.item(r);if("#text"!=i.nodeName||""!=i.textContent.replace(/\n/g,"").replace(/ /g,""))if(3===i.nodeType||i.nodeType===i.CDATA_SECTION_NODE){if(1===e.childNodes.length&&!e.hasAttributes())return i.textContent;n.text=i.textContent}else n=addToObject(n,i.tagName,traverseTree(i))}a=!1}if(e.hasAttributes()){for(var t=0;t<e.attributes.length;t++){var o=e.attributes.item(t);n[o.nodeName]=o.nodeValue}a=!1}return n};XMLTools.prototype.toObject=function(){return null==this.doc?null:(this.obj=traverseTree(this.doc),this.obj)},XMLTools.prototype.toJSON=function(){return null==this.doc?null:(null==this.obj&&(this.obj=traverseTree(this.doc)),JSON.stringify(this.obj))},module.exports=XMLTools;